{"version":3,"sources":["webpack:///webpack/bootstrap f64a669ad362b1ab7d0e","webpack:///./src/js/services/API.js","webpack:///./src/js/services/DataStore.js","webpack:///./src/js/services/CustomEvent.js","webpack:///./src/js/PinPreview.js","webpack:///./src/js/services/Analytics.js","webpack:///./src/js/main.js","webpack:///./~/bullet-pubsub/dist/bullet.js","webpack:///./~/debounce/index.js","webpack:///./~/mousetrap/mousetrap.js","webpack:///./~/packing-ajax/index.js","webpack:///./~/type-of/index.js","webpack:///./src/js/services/AJAX.js","webpack:///./src/js/services/ErrorUtil.js","webpack:///./src/js/views/Application.js","webpack:///./src/js/views/Authorization.js"],"names":["API","Get","DATA__ACCESS_TOKEN","Promise","resolve","reject","PDK","init","appId","cookie","login","scope","session","setSession","Post","data","then","catch","access_token","sort","a","b","nameA","name","toUpperCase","nameB","DataStore","key","value","window","localStorage","setItem","getItem","removeItem","CustomEvent","eventName","callback","on","off","once","trigger","PinPreview","file","split","pop","join","instance","actionMenuTrigger","querySelector","actionMenu","note","link","addEventListener","isActionMenuVisible","showPreviewActions","hidePreviewActions","e","target","dataset","action","setNote","classList","add","remove","contains","pinned","template","document","getElementById","importNode","content","reader","FileReader","onload","previewContainer","theFile","previewImage","src","result","toggle","abort","readAsDataURL","imageData","board","pinError","CreatePin","image_base64","PinCreated","Log","Error","error","err","severity","exception","metaData","Analytics","FireEvent","shortcutName","featureName","eventAction","eventOptions","DATA__IS_ADMIN","gtag","navigator","userAgent","indexOf","match","IsAuthenticated","bugsnagOptions","apiKey","appVersion","releaseStage","notifyReleaseStages","collectUserIp","location","origin","bugsnagClient","bugsnag","Bullet","ParamCountError","methodName","expectedParamsString","paramCount","message","stack","prototype","constructor","ParamTypeError","parameterName","parameter","expectedType","TypeError","EventNameLengthError","EventNamesArrayLengthError","UndeclaredEventError","UnmappedEventError","_CALLBACK_NAMESPACE","_self","_mappings","_strictMode","_triggerAsync","_errors","events","_runCallback","id","callbacks","callbackObject","cb","_cloneCallbacks","clonedCallbacks","callbackName","_deleteAllCallbackReferencesForEvent","totalEvents","_deleteAllCallbackReferences","_getMappings","clonedMappings","mapping","totalCallbacks","fn","arguments","length","callbackId","fnToRemove","replaceCallback","oldFn","newFn","replaceAllCallbacks","setTimeout","addEventName","addMultipleEventNames","eventNames","Array","i","currentEventName","removeEventName","getStrictMode","setStrictMode","useStrictMode","getTriggerAsync","setTriggerAsync","useAsync","define","module","exports","debounce","func","wait","immediate","timeout","args","context","timestamp","later","last","Date","now","apply","debounced","callNow","clear","clearTimeout","flush","undefined","_MAP","_KEYCODE_MAP","_SHIFT_MAP","_SPECIAL_ALIASES","test","platform","_REVERSE_MAP","toString","_addEvent","object","type","attachEvent","_characterFromEvent","character","String","fromCharCode","which","shiftKey","toLowerCase","_modifiersMatch","modifiers1","modifiers2","_eventModifiers","modifiers","push","altKey","ctrlKey","metaKey","_preventDefault","preventDefault","returnValue","_stopPropagation","stopPropagation","cancelBubble","_isModifier","_getReverseMap","hasOwnProperty","_pickBestAction","_keysFromString","combination","replace","_getKeyInfo","keys","_belongsTo","element","ancestor","parentNode","Mousetrap","targetElement","self","_callbacks","_directMap","_sequenceLevels","_resetTimer","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","matches","seq","deleteCombo","combo","deleteSequence","splice","_fireCallback","sequence","stopCallback","srcElement","_handleKey","maxLevel","processedSequenceCallback","Math","max","ignoreThisKeypress","_handleKeyEvent","keyCode","handleKey","_resetSequenceTimer","_bindSequence","_increaseSequence","nextAction","_callbackAndReset","isFinal","wrappedCallback","_bindSingle","info","_bindMultiple","combinations","bind","call","unbind","reset","className","tagName","isContentEditable","addKeycodes","documentMousetrap","method","charAt","require","jsonpID","rscript","scriptTypeRE","xmlTypeRE","jsonType","htmlType","blankRE","ajax","options","settings","extend","ajaxStart","crossDomain","url","RegExp","$2","host","dataType","hasPlaceholder","appendQuery","JSONP","serializeData","mime","accepts","baseHeaders","protocol","$1","xhr","abortTimeout","overrideMimeType","contentType","headers","onreadystatechange","readyState","status","mimeToDataType","getResponseHeader","responseText","eval","responseXML","JSON","parse","ajaxError","ajaxSuccess","async","open","setRequestHeader","ajaxBeforeSend","empty","send","triggerAndReturn","triggerGlobal","global","active","ajaxStop","beforeSend","success","ajaxComplete","complete","script","createElement","head","getElementsByTagName","documentElement","onerror","insertBefore","firstChild","XMLHttpRequest","json","xml","html","text","query","param","get","post","getJSON","escape","encodeURIComponent","serialize","params","obj","traditional","array","k","v","slice","forEach","source","Object","val","callee","ex","nodeType","AJAX","baseUrl","apiVersion","endpoint","_buildUrl","response","_fetch","ErrorUtil","notify","console","Application","previewsPinsContainer","imageSelectContainer","refreshBoardsButton","pinsContainer","sendToPinterestButton","sendAllToBoardSelect","fileUploadInput","modalOverlay","clearButton","clearAllButton","pinPreviews","showApplicationContainer","attachListeners","createKeyboardShortcuts","ToggleActionMenu","loadBoards","populateBoardNames","boards","FeatureUsed","clearCompleted","clearAll","pinPreview","validateInputs","createPins","boardValue","updateSelectedBoards","onchange","createPinPreviews","showPrivacyPolicy","hidePrivacyPolicy","hideKeyboardShortcuts","updateStickyPin","stopImmediatePropagation","Remove","DATA__BOARDS","reload","completedPins","querySelectorAll","filter","preview","isPinned","previewPins","elements","innerText","resetSendAllToBoard","click","KeyboardShortcutUsed","autofillFields","showKeyboardShortcuts","input","files","scrollOffset","windowBreakpoint","abs","getBoundingClientRect","top","appendChild","render","setInstance","forceLoad","Boards","Set","stringify","boardNames","innerHTML","option","createBoardNameOptionElement","existingBoardNameSelectors","select","newBoard","boardNameSelectors","boardNameSelect","previews","tabIndex","noteContainer","focus","balloon","tooltip","removeAttribute","createPin","noteField","linkField","setLink","pageYOffset","show","actionButtons","Authorization","authenticationContainer","authenticationButton","showAuthenticationContainer","Login","accessToken","hideAuthenticationContainer"],"mappings":"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","file":"scripts.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f64a669ad362b1ab7d0e","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\nimport AJAX from 'services/AJAX';\r\nimport DataStore from 'services/DataStore';\r\n\r\n/**\r\n * Class API\r\n *\r\n * Interface for communicating with the API\r\n */\r\nexport default class API {\r\n\r\n    /**\r\n     * Check if a user has authenticated the application. I.e. an access token exists\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    static IsAuthenticated() {\r\n        return DataStore.Get(DataStore.DATA__ACCESS_TOKEN()) !== null;\r\n    }\r\n\r\n    /**\r\n     * Initialise the Pinterest SDK and call the login function to get an access token\r\n     * Access token information will be set in the Pinterest SDK, however at the moment\r\n     * the SDK is only used here\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Login() {\r\n        return new Promise((resolve, reject) => {\r\n            PDK.init({\r\n                appId: \"4927694653406329461\", // Change this\r\n                cookie: true\r\n            });\r\n            PDK.login({scope: 'read_public, write_public'}, ({session}) => {\r\n                PDK.setSession(session);\r\n                resolve(session);\r\n            })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get cursor of users' Pins\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Pins() {\r\n        return new Promise((resolve, reject) => {\r\n            AJAX.Post('me/pins/', data)\r\n                .then(resolve)\r\n                .catch(reject);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get list of users boards\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Boards() {\r\n        return new Promise((resolve, reject) => {\r\n            AJAX.Get('me/boards/', {\r\n                access_token: DataStore.Get(DataStore.DATA__ACCESS_TOKEN())\r\n            }, true)\r\n                .then(({data}) => {\r\n                    data.sort((a, b) => {\r\n                        let nameA = a.name.toUpperCase();\r\n                        let nameB = b.name.toUpperCase();\r\n                        if (nameA < nameB) {\r\n                            return -1;\r\n                        }\r\n                        if (nameA > nameB) {\r\n                            return 1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n\r\n                    resolve(data);\r\n                })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Send request to Pinterest API to create a new pin\r\n     *\r\n     * @param {Object} data The data to create the pin with\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static CreatePin(data) {\r\n        return new Promise((resolve, reject) => {\r\n            AJAX.Post('pins/', {\r\n                access_token: DataStore.Get(DataStore.DATA__ACCESS_TOKEN()),\r\n                ...data\r\n            })\r\n            .then(resolve)\r\n            .catch(reject);\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/API.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Class API\n *\n * Interface for communicating with the API\n */\nexport default class DataStore {\n\n    /**\n     * String constant for access token key\n     *\n     * @returns {string}\n     */\n    static DATA__ACCESS_TOKEN() {\n        return 'pinterest_accessToken';\n    }\n\n    static DATA__BOARDS() {\n        return 'pinterest_boards';\n    }\n\n    static DATA__IS_ADMIN() {\n        return 'bulk_pinner_admin';\n    }\n\n    /**\n     * Set value in the data store\n     *\n     * @param {string} key   The identifying key for the value\n     * @param {string} value The value for the identifying key\n     *\n     * @returns {null}\n     */\n    static Set(key, value) {\n        window.localStorage.setItem(key, value);\n    }\n\n    /**\n     * Get the value for a given key\n     *\n     * @param {string} key The identifying key for the value\n     *\n     * @returns {string}\n     */\n    static Get(key) {\n        return window.localStorage.getItem(key);\n    }\n\n    /**\n     * Remove a local storage key/value\n     *\n     * @param {string} key The identifying key to remove\n     *\n     * @returns {null}\n     */\n    static Remove(key) {\n        return window.localStorage.removeItem(key);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/DataStore.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Bullet from 'bullet-pubsub';\n\n/**\n * Class Event\n *\n * Wrapper for the event library chosen, preventing the application from being tightly coupled to the library\n *\n * This class will only be used for custom events. Events like click, hover etc will be handled by vanilla JS handlers\n */\nexport default class CustomEvent {\n\n    /**\n     * Wrapper for the .on event listener\n     *\n     * @param {string}   eventName The name of the event to listen for\n     * @param {function} callback  The function to execute when the event is detected\n     *\n     * @returns {null}\n     */\n    static on(eventName, callback) {\n        Bullet.on(eventName, callback, false);\n    }\n\n    /**\n     * Wrapper for the .off function\n     *\n     * @param {string}   eventName The name of the event to remove\n     * @param {function} callback  [Optional] The function to remove. If the event listener needs to remain for some instances.\n     *\n     * @returns {null}\n     */\n    static off(eventName, callback) {\n        Bullet.off(eventName, callback);\n    }\n\n    /**\n     * Wrapper for the .once event listener.\n     * This listener will only be triggered once, and then removed\n     *\n     * @param {string}   eventName The name of the event to listen for\n     * @param {function} callback  The function to execute when event is detected\n     *\n     * @returns {null}\n     */\n    static once(eventName, callback) {\n        Bullet.once(eventName, callback);\n    }\n\n    /**\n     * Wrapper for the .trigger function, that will trigger an event\n     *\n     * @param {string} eventName The name of the event to trigger\n     * @param {Object} data      [Optional] Custom data to pass to the event listener callback\n     *\n     * @returns {null}\n     */\n    static trigger(eventName, data = {}) {\n        Bullet.trigger(eventName, data)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/CustomEvent.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport ErrorUtil from 'services/ErrorUtil';\r\nimport Analytics from 'services/Analytics';\r\nimport API from 'services/API';\r\n\r\n/**\r\n * Class PinPreview\r\n */\r\nexport default class PinPreview {\r\n\r\n    constructor(file) {\r\n        this.file = file;\r\n\r\n        let name = this.file.name.split('.');\r\n        // Remove the extension from the filename array\r\n        name.pop();\r\n        // Re-join the remaining elements in the filename array, in case the filename itself had other fullstops in it\r\n        this.name = name.join('.');\r\n    }\r\n\r\n    /**\r\n     * Save the instance of the pin preview element that has been imported into the DOM\r\n     *\r\n     * @param instance\r\n     *\r\n     * @returns {PinPreview}\r\n     */\r\n    setInstance(instance) {\r\n        this.instance          = instance;\r\n        this.actionMenuTrigger = this.instance.querySelector('.preview-action-btn');\r\n        this.actionMenu        = this.instance.querySelector('.preview-actions');\r\n        this.note              = this.instance.querySelector('#note');\r\n        this.link              = this.instance.querySelector('.link');\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Attach event listeners to various elements in the Pin Preview\r\n     *\r\n     * @returns {null}\r\n     */\r\n    attachListeners() {\r\n\r\n        // Event listener to show/hide the actions menu\r\n        this.actionMenuTrigger.addEventListener('click', e => {\r\n            if (!this.isActionMenuVisible()) {\r\n                this.showPreviewActions();\r\n            } else {\r\n                this.hidePreviewActions();\r\n            }\r\n        });\r\n\r\n        // Event listener to populate the note with the name of the file being pinned\r\n        this.actionMenu.querySelector('.preview-action').addEventListener('click', e => {\r\n            switch (e.target.dataset.action) {\r\n                case 'filename':\r\n                    this.setNote(this.name);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Show the preview actions menu for the current Pin Preview\r\n     *\r\n     * @returns {null}\r\n     */\r\n    showPreviewActions() {\r\n        this.actionMenu.classList.add('is-visible');\r\n    }\r\n\r\n    /**\r\n     * Hide the preview actions menu for the current Pin Preview\r\n     *\r\n     * @returns {null}\r\n     */\r\n    hidePreviewActions() {\r\n        this.actionMenu.classList.remove('is-visible');\r\n    }\r\n\r\n    /**\r\n     * Determine if the action menu for this PinPreview class is showing\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    isActionMenuVisible() {\r\n        return this.actionMenu.classList.contains('is-visible');\r\n    }\r\n\r\n    /**\r\n     * Determine if this pin preview has been sent to Pinterest\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    isPinned() {\r\n        return !!this.instance.dataset.pinned || false;\r\n    }\r\n\r\n    /**\r\n     * Set value for the note textarea\r\n     *\r\n     * @param {string} value The new value for the note\r\n     *\r\n     * @returns {null}\r\n     */\r\n    setNote(value) {\r\n        this.note.value = value;\r\n    }\r\n\r\n    /**\r\n     * Set value for link\r\n     *\r\n     * @param {string} link The value to be set for the link field\r\n     *\r\n     * @returns {null}\r\n     */\r\n    setLink(link) {\r\n        this.link.value = link;\r\n    }\r\n\r\n    /**\r\n     * Render a pin preview template instance\r\n     *\r\n     * @returns {Node}\r\n     */\r\n    render() {\r\n        const template = document.getElementById('preview-template');\r\n        const instance = document.importNode(template.content, true);\r\n\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = (theFile => {\r\n            const previewContainer = theFile.querySelector('.preview-container');\r\n            const previewImage = previewContainer.querySelector(\".preview-image\");\r\n\r\n            return e => {\r\n                previewImage.src = e.target.result;\r\n                previewImage.classList.toggle('loaded', true);\r\n            };\r\n        })(instance);\r\n\r\n        reader.abort();\r\n        reader.readAsDataURL(this.file);\r\n\r\n        return instance;\r\n    }\r\n\r\n    /**\r\n     * Send request to Pinterest to pin this image\r\n     *\r\n     * @returns {null}\r\n     */\r\n    createPin() {\r\n        const imageData = this.instance.querySelector('.preview-image').src;\r\n        const note      = this.instance.querySelector(\".note\").value;\r\n        const board     = this.instance.querySelector(\".board-names\").value;\r\n        const link      = this.instance.querySelector(\".link\").value;\r\n\r\n        this.instance.classList.toggle('sending', true);\r\n        delete this.instance.dataset.pinError; // Remove any previous error that might be displaying\r\n\r\n        try {\r\n            API.CreatePin({\r\n                board: board, // Sending just the board ID. Documentation doesn't say this can be done, but it works. Reason is: spaces in board names\r\n                image_base64: imageData,\r\n                note: note,\r\n                link: link\r\n            })\r\n                .then(response => {\r\n                    this.instance.dataset.pinned = true;\r\n                    this.instance.classList.toggle('sending', false);\r\n                    Analytics.PinCreated();\r\n                })\r\n                .catch(err => {\r\n                    ErrorUtil.Log(new Error('Create Pin promise rejected'), {\r\n                        error: err,\r\n                        severity: 'error'\r\n                    });\r\n                });\r\n        } catch (exception) {\r\n            ErrorUtil.Log(new Error('Exception thrown from CreatePin function'), {\r\n                metaData: {\r\n                    'details': exception\r\n                },\r\n                severity: 'error'\r\n            });\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/PinPreview.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\nimport DataStore from 'services/DataStore';\r\n\r\n/**\r\n * Class Analytics\r\n */\r\nexport default class Analytics {\r\n\r\n    /**\r\n     * Perform analytics tracking actions relative to a pin being created\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static PinCreated() {\r\n        Analytics.FireEvent('pin_created', {\r\n            'event_category': 'pins'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fire an event to help track which features are used\r\n     *\r\n     * @param {string} shortcutName The label of the shortcut that was used\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static KeyboardShortcutUsed(shortcutName) {\r\n        Analytics.FireEvent(shortcutName, {\r\n            'event_category': 'keyboard_shortcuts'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fire an event to help track which features are used\r\n     *\r\n     * @param {string} featureName The label of the feature that was used\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static FeatureUsed(featureName) {\r\n        Analytics.FireEvent(featureName, {\r\n            'event_category': 'features'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fire an event on Google Analytics\r\n     *\r\n     * @param {string} eventAction  The 'action' of the event to creation\r\n     * @param {Object} eventOptions Extra options to send with the event action\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static FireEvent(eventAction, eventOptions) {\r\n        if (DataStore.Get(DataStore.DATA__IS_ADMIN) === null) {\r\n            gtag('event', eventAction, eventOptions);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/Analytics.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Authorization from 'views/Authorization';\nimport Application from 'views/Application';\nimport API from 'services/API';\nimport CustomEvent from 'services/CustomEvent';\n\n// If the user is using Internet Explorer, kindly let them know that their browser is out of date, and that they should update\nif (window.navigator.userAgent.indexOf(\"MSIE\") > 0 || !!navigator.userAgent.match(/Trident\\/7\\./)) {\n    document.querySelector('body').classList.add('no-scroll');\n    document.querySelector('.modal-overlay').classList.remove('hidden');\n    document.querySelector('.modal-overlay').classList.add('ie-overlay');\n    document.querySelector('.modal-overlay').querySelector('.internet-explorer-disabled').classList.remove('hidden');\n} else {\n    // Create instances of application classes\n    new Authorization();\n    new Application();\n\n    // Determine if used is logged in and publish appropriate status\n    if (!API.IsAuthenticated()) {\n        CustomEvent.trigger('user-not-authenticated');\n    } else {\n        CustomEvent.trigger('user-authenticated');\n    }\n\n    const bugsnagOptions = {\n        apiKey: '856ea8cf87049704dbad28042ef0aa16',\n        appVersion: '0.5.3',\n        releaseStage: 'production',\n        notifyReleaseStages: ['production', 'staging'],\n        collectUserIp: false\n    };\n\n    if (window.location.origin !== 'https://bulkpinner.github.io') {\n        bugsnagOptions.releaseStage = 'developer';\n    }\n\n    window.bugsnagClient = bugsnag(bugsnagOptions)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","(function () {\n\n    'use strict';\n    \n    function Bullet ()\n    {\n        // ------------------------------------------------------------------------------------------\n        // -- Custom Errors\n        // ------------------------------------------------------------------------------------------\n        function ParamCountError (methodName, expectedParamsString, paramCount) {\n            \n            this.message = 'Bullet:: [' + methodName + '] ' + expectedParamsString + ', but received: ' + paramCount;\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        ParamCountError.prototype = new Error();\n        ParamCountError.prototype.name = ParamCountError.name;\n        ParamCountError.prototype.constructor = ParamCountError;\n\n        function ParamTypeError (methodName, parameterName, parameter, expectedType) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Expected parameter - ' + parameterName + ' - to be type: ' + expectedType + ', but received type: ' + typeof parameter;\n            var error = new TypeError(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        ParamTypeError.prototype = new TypeError();\n        ParamTypeError.prototype.name = ParamTypeError.name;\n        ParamTypeError.prototype.constructor = ParamTypeError;\n\n        function EventNameLengthError (methodName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Expected event name parameter to be longer than 0 characters';\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        EventNameLengthError.prototype = new Error();\n        EventNameLengthError.prototype.name = EventNameLengthError.name;\n        EventNameLengthError.prototype.constructor = EventNameLengthError;\n\n        function EventNamesArrayLengthError (methodName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Expected event names array to contain one or more event names';\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        EventNamesArrayLengthError.prototype = new Error();\n        EventNamesArrayLengthError.prototype.name = EventNamesArrayLengthError.name;\n        EventNamesArrayLengthError.prototype.constructor = EventNamesArrayLengthError;\n\n        function UndeclaredEventError (methodName, eventName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Event string: \"' + eventName + '\" does not exist within the events dictionary\\nPlease use the Bullet.addEventName method to add this string.';\n\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        UndeclaredEventError.prototype = new Error();\n        UndeclaredEventError.prototype.name = UndeclaredEventError.name;\n        UndeclaredEventError.prototype.constructor = UndeclaredEventError;\n\n\n        function UnmappedEventError (methodName, eventName) {\n            \n            this.message = 'Bullet:: [' + methodName + '] Event string: \"' + eventName + '\" is not mapped to any callbacks\\nPlease use the Bullet.on method to map this string to a callback.';\n\n            var error = new Error(this.message);\n            if (typeof error.stack !== 'undefined') this.stack = error.stack;\n        }\n        UnmappedEventError.prototype = new Error();\n        UnmappedEventError.prototype.name = UnmappedEventError.name;\n        UnmappedEventError.prototype.constructor = UnmappedEventError;\n\n        var _CALLBACK_NAMESPACE = '__bullet_pubsub__';\n        // ------------------------------------------------------------------------------------------\n        // -- Private variables\n        // ------------------------------------------------------------------------------------------\n        var _self = this;\n        var _mappings = {};\n        var _strictMode = false;\n        var _triggerAsync = true;\n\n        // Expose custom error type constructors (for testing), but use an underscore to imply privacy.\n        _self._errors = {\n            ParamCountError : ParamCountError,\n            ParamTypeError : ParamTypeError,\n            EventNameLengthError : EventNameLengthError,\n            EventNamesArrayLengthError: EventNamesArrayLengthError,\n            UndeclaredEventError : UndeclaredEventError,\n            UnmappedEventError : UnmappedEventError,\n        };\n\n\n        // ------------------------------------------------------------------------------------------\n        // -- Public variables\n        // ------------------------------------------------------------------------------------------\n        _self.events = {};\n\n\n        // ------------------------------------------------------------------------------------------\n        // -- Private methods\n        // ------------------------------------------------------------------------------------------\n        function _runCallback (eventName, data) {\n            for (var id in _mappings[eventName].callbacks)\n            {\n                var callbackObject = _mappings[eventName].callbacks[id];\n\n                if (typeof callbackObject.cb === 'function') callbackObject.cb(data);\n                if (typeof callbackObject.once === 'boolean' && callbackObject.once === true) _self.off(eventName, callbackObject.cb);\n            }\n        }\n\n        function _cloneCallbacks (callbacks) {\n            var clonedCallbacks = {};\n\n            for (var callbackName in callbacks) {\n                \n                clonedCallbacks[callbackName] = {\n                    cb : callbacks[callbackName].cb,\n                    once : callbacks[callbackName].once\n                };\n            }\n\n            return clonedCallbacks;\n        }\n\n        function _deleteAllCallbackReferencesForEvent (eventName)\n        {\n            for (var id in _mappings[eventName].callbacks)\n            {\n                var callback = _mappings[eventName].callbacks[id].cb;\n\n                callback[_CALLBACK_NAMESPACE].totalEvents--;\n\n                if (callback[_CALLBACK_NAMESPACE].totalEvents === 0)\n                {\n                    delete callback[_CALLBACK_NAMESPACE];\n                }\n                else\n                {\n                    delete callback[_CALLBACK_NAMESPACE][eventName];\n                }\n            }\n        }\n\n        function _deleteAllCallbackReferences ()\n        {\n            for (var eventName in _mappings)\n            {\n                _deleteAllCallbackReferencesForEvent(eventName);\n            }\n        }\n\n        // Expose _getMappings method (for testing), but use an underscore to imply privacy.\n        _self._getMappings = function () {\n            \n            // Return a dictionary object that has no effect on app state to ensure '_mappings'\n            // stays private, even if the value returned from this method is modified.\n            var clonedMappings = {};\n\n            for (var mapping in _mappings)\n            {             \n                clonedMappings[mapping] = {\n                    callbacks : _cloneCallbacks(_mappings[mapping].callbacks),\n                    totalCallbacks : _mappings[mapping].totalCallbacks\n                };\n            }\n\n            return clonedMappings;\n        };\n\n\n        // ------------------------------------------------------------------------------------------\n        // -- Public methods\n        // ------------------------------------------------------------------------------------------\n        _self.on = function (eventName, fn, once)\n        {\n            if (arguments.length < 2 || arguments.length > 3)\n            {\n                throw new ParamCountError('on', 'Expected between 2 and 3 parameters', arguments.length);\n            }\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('on', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('on');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('on', eventName);\n            }\n\n            if (typeof fn !== 'function')\n            {\n                throw new ParamTypeError('on', 'callback', fn, 'function');\n            }\n\n            if (typeof once !== 'undefined' && typeof once !== 'boolean')\n            {\n                throw new ParamTypeError('on', 'once', once, 'boolean');\n            }\n\n            // Create a reference between the callback and stored event.\n            var callbackId = null;\n\n            // If the named event object already exists in the dictionary...\n            if (typeof _mappings[eventName] !== 'undefined')\n            {\n                // Attempt to get the callback ID from the callback itself.\n                if (typeof fn[_CALLBACK_NAMESPACE] === 'undefined')\n                {\n                    fn[_CALLBACK_NAMESPACE] = {\n                        totalEvents: 0\n                    };\n                }\n                \n                // Add a new callback object to the existing event object.\n                if (typeof fn[_CALLBACK_NAMESPACE][eventName] === 'undefined')\n                {\n                    callbackId = _mappings[eventName].totalCallbacks;\n\n                    _mappings[eventName].totalCallbacks++;\n\n                    _mappings[eventName].callbacks[callbackId] = {\n                        cb : fn,\n                        once : typeof once === 'boolean' ? once : false\n                    };\n\n                    // On the callback, create a reference to the event mapping.\n                    fn[_CALLBACK_NAMESPACE][eventName] = callbackId;\n                    fn[_CALLBACK_NAMESPACE].totalEvents++;\n                }\n\n                if (typeof once === 'boolean')\n                {\n                    // Get the callback ID from the value of the existing event name key.\n                    callbackId = fn[_CALLBACK_NAMESPACE][eventName];\n\n                    // The function already exists, so update it's 'once' value.\n                    _mappings[eventName].callbacks[callbackId].once = once;\n                }\n            }\n            else\n            {\n                // Create a new event object in the dictionary with the specified name and callback.\n                _mappings[eventName] = {\n                    callbacks : {}\n                };\n\n                callbackId = 0;\n\n                _mappings[eventName].callbacks[callbackId] = {cb : fn, once : !!once};\n                _mappings[eventName].totalCallbacks = 1;\n\n                // On the callback, create a reference to the event mapping.\n                if (typeof fn[_CALLBACK_NAMESPACE] === 'undefined')\n                {\n                    fn[_CALLBACK_NAMESPACE] = {};\n                    fn[_CALLBACK_NAMESPACE].totalEvents = 1;\n                }\n                else\n                {\n                    fn[_CALLBACK_NAMESPACE].totalEvents++;\n                }\n                \n                fn[_CALLBACK_NAMESPACE][eventName] = callbackId;\n            }\n        };\n\n        _self.once = function (eventName, fn)\n        {\n            if (arguments.length !== 2)\n            {\n                throw new ParamCountError('once', 'Expected 2 parameters', arguments.length);\n            }\n            else if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('once', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('once');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('once', eventName);\n            }\n\n            if (typeof fn !== 'function')\n            {\n                throw new ParamTypeError('once', 'callback', fn, 'function');\n            }\n\n            _self.on(eventName, fn, true);\n        };\n\n        _self.off = function (eventName, fn)\n        {\n            if (arguments.length === 0)\n            {\n                // delete all references to Bullet that exist on mapped callbacks.\n                _deleteAllCallbackReferences();\n\n                // Remove all mappings from the dictionary.\n                _mappings = {};\n\n                return;\n            }\n            else if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('off', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('off');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('off', eventName);\n            }\n\n            if (typeof _mappings[eventName] === 'undefined')\n            {\n                // There is no mapping to remove, so return silently.\n                return;\n            }\n\n            // Remove just the function, if passed as a parameter and in the dictionary.\n            if (typeof fn === 'function')\n            {\n                // if (typeof fn[_CALLBACK_NAMESPACE] === 'undefined' || typeof fn[_CALLBACK_NAMESPACE][eventName] === 'undefined')\n                // {\n                //     // TODO: Throw error here if in strict mode.\n                // }\n\n                // Retrieve a reference to the stored event from the callback.\n                var id = fn[_CALLBACK_NAMESPACE][eventName];\n                var fnToRemove = _mappings[eventName].callbacks[id];\n\n                if (typeof fnToRemove !== 'undefined')\n                {\n                    // delete the callback object from the dictionary.\n                    delete _mappings[eventName].callbacks[id];\n\n                    // delete the event reference on the callback function.\n                    delete fn[_CALLBACK_NAMESPACE][eventName];\n\n                    _mappings[eventName].totalCallbacks--;\n                    fn[_CALLBACK_NAMESPACE].totalEvents--;\n\n                    if (_mappings[eventName].totalCallbacks === 0)\n                    {\n                        // There are no more functions in the dictionary that are\n                        // registered to this event, so delete the named event object.\n                        delete _mappings[eventName];\n                    }\n\n                    if (fn[_CALLBACK_NAMESPACE].totalEvents === 0)\n                    {\n                        // There are no more events registered on this callback,\n                        // so delete the Bullet namespace.\n                        delete fn[_CALLBACK_NAMESPACE];\n                    }\n                }\n            }\n            else if (typeof fn !== 'undefined')\n            {\n                throw new ParamTypeError('off', 'callback', fn, 'function');\n            }\n            else\n            {\n                // No callback was passed to the 'off' method...\n\n                // For each callback in _mappings[eventName], delete the reference to\n                // the specified event name on the callback itself.\n                _deleteAllCallbackReferencesForEvent(eventName);\n\n                // Delete all functions in the dictionary that are registered to this\n                // event by deleting the named event object.\n                delete _mappings[eventName];\n            }\n        };\n\n        // Replace a single mapped callback for the specified event name with a new callback.\n        _self.replaceCallback = function (eventName, oldFn, newFn, once) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('replaceCallback', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('replaceCallback');\n            }\n            else if (typeof _mappings[eventName] === 'undefined')\n            {\n                throw new UnmappedEventError('replaceCallback', eventName);\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('replaceCallback', eventName);\n            }\n\n            if (typeof oldFn !== 'function')\n            {\n                throw new ParamTypeError('replaceCallback', 'callback', oldFn, 'function');\n            }\n\n            if (typeof newFn !== 'function')\n            {\n                throw new ParamTypeError('replaceCallback', 'callback', newFn, 'function');\n            }\n\n            if (typeof once !== 'undefined' && typeof once !== 'boolean')\n            {\n                throw new ParamTypeError('replaceCallback', 'once', once, 'boolean');\n            }\n            \n            _self.off(eventName, oldFn);\n            _self.on(eventName, newFn, once);\n        };\n\n        // Replace all of the specified event name’s mapped callbacks with the specified callback.\n        _self.replaceAllCallbacks = function (eventName, newFn, once) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('replace', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('replace');\n            }\n            else if (typeof _mappings[eventName] === 'undefined')\n            {\n                throw new UnmappedEventError('replace', eventName);\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('replace', eventName);\n            }\n\n            if (typeof newFn !== 'function')\n            {\n                throw new ParamTypeError('replace', 'callback', newFn, 'function');\n            }\n\n            if (typeof once !== 'undefined' && typeof once !== 'boolean')\n            {\n                throw new ParamTypeError('replace', 'once', once, 'boolean');\n            }\n            \n            _self.off(eventName);\n            _self.on(eventName, newFn, once);\n        };\n\n        _self.trigger = function (eventName, data)\n        {\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('trigger', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('trigger');\n            }\n            else if (_strictMode && typeof _self.events[eventName] === 'undefined')\n            {\n                throw new UndeclaredEventError('trigger', eventName);\n            }\n            \n            if (typeof _mappings[eventName] === 'undefined')\n            {\n                if (_strictMode) throw new UnmappedEventError('trigger', eventName);\n\n                // Return silently if not in strict mode.\n                return;\n            }\n\n            // Check whether or not this is a browser environment.\n            if (_triggerAsync && typeof window !== 'undefined')\n            {\n                window.setTimeout(function(){\n                    _runCallback(eventName, data);\n                }, 0);\n            }\n            else\n            {\n                _runCallback(eventName, data);\n            }\n        };\n\n        _self.addEventName = function (eventName) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('addEventName', 'event name', eventName, 'string');\n            }\n            else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('addEventName');\n            }\n\n            _self.events[eventName] = eventName;\n        };\n\n        _self.addMultipleEventNames = function (eventNames) {\n            \n            if (!(eventNames instanceof Array))\n            {\n                throw new ParamTypeError('addMultipleEventNames', 'event names', eventNames, 'array');\n            }\n            else if (eventNames.length === 0)\n            {\n                throw new EventNamesArrayLengthError('addMultipleEventNames');\n            }\n\n            var i = 0;\n            var length = eventNames.length;\n\n            for(i; i < length; i++) {\n                var currentEventName = eventNames[i];\n                \n                _self.addEventName(currentEventName);\n            }\n        }\n\n        _self.removeEventName = function (eventName) {\n\n            if (typeof eventName !== 'string')\n            {\n                throw new ParamTypeError('removeEventName', 'event name', eventName, 'string');\n            }\n             else if (eventName.length === 0)\n            {\n                throw new EventNameLengthError('removeEventName');\n            }\n\n            if (_self.events[eventName]) delete _self.events[eventName];\n        };\n\n        _self.getStrictMode = function () {\n\n            // Return a boolean that doesn't directly point to the internal '_strictMode' property.\n            return _strictMode === true ? true : false;\n        };\n\n        _self.setStrictMode = function (useStrictMode) {\n\n            if (typeof useStrictMode !== 'boolean') throw new ParamTypeError('setStrictMode', 'strict mode', useStrictMode, 'boolean');\n\n            _strictMode = useStrictMode;\n        };\n\n        _self.getTriggerAsync = function () {\n\n            // Return a boolean that doesn't directly point to the internal '_triggerAsync' property.\n            return _triggerAsync === true ? true : false;\n        };\n\n        _self.setTriggerAsync = function (useAsync) {\n\n            if (typeof useAsync !== 'boolean') throw new ParamTypeError('setTriggerAsync', 'trigger async', useAsync, 'boolean');\n\n            _triggerAsync = useAsync;\n        };\n\n        // TODO : Create an 'addMultipleEventNames' method with an array of strings passed as a param.\n        // - include type checks for string while looping over the array.\n\n        // TODO : Create a 'replaceAllEventNames' method with an array of strings passed as a param.\n        // - include type checks for string while looping over the array.\n\n        // TODO : Create a 'removeAllEventNames' method. No params necessary.\n        // – Internally this could simply call 'replaceAllEventNames' and pass an empty array as a param.\n\n        // TODO : Create an 'onAny' method with an array of strings passed as the first param and a single callback as the second.\n        // - include type checks for string while looping over the array.\n\n        // TODO : Create an 'onMultiple' method with an array of flat objects passed as a param.\n        // - example of required param structure:\n        // [{eventName: 'someEvent', callback: someCallback, once: false}, {eventName: 'anotherEvent', callback: anotherCallback, once: true}]\n    }\n\n\n    // ------------------------------------------------------------------------------------------\n    // -- Module definition\n    // ------------------------------------------------------------------------------------------\n    // Check for AMD/Module support, otherwise define Bullet as a global variable.\n\n    if (typeof define !== 'undefined' && define.amd)\n    {\n        // AMD. Register as an anonymous module.\n        define (function()\n        {\n            return new Bullet();\n        });\n\n    }\n    else if (typeof module !== 'undefined' && module.exports)\n    {\n        module.exports = new Bullet();\n    }\n    else\n    {\n        window.Bullet = new Bullet();\n    }\n    \n})();\n\n\n// WEBPACK FOOTER //\n// ./~/bullet-pubsub/dist/bullet.js","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/debounce/index.js","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.1\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n\n\n\n// WEBPACK FOOTER //\n// ./~/mousetrap/mousetrap.js","var type = require('type-of');\n\nvar jsonpID = 0,\n    document = window.document,\n    key,\n    name,\n    rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n    scriptTypeRE = /^(?:text|application)\\/javascript/i,\n    xmlTypeRE = /^(?:text|application)\\/xml/i,\n    jsonType = 'application/json',\n    htmlType = 'text/html',\n    blankRE = /^\\s*$/\n\nvar ajax = module.exports = function(options){\n  var settings = extend({}, options || {})\n  for (key in ajax.settings) if (settings[key] === undefined) settings[key] = ajax.settings[key]\n\n  ajaxStart(settings)\n\n  if (!settings.crossDomain) settings.crossDomain = /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(settings.url) &&\n    RegExp.$2 != window.location.host\n\n  var dataType = settings.dataType, hasPlaceholder = /=\\?/.test(settings.url)\n  if (dataType == 'jsonp' || hasPlaceholder) {\n    if (!hasPlaceholder) settings.url = appendQuery(settings.url, 'callback=?')\n    return ajax.JSONP(settings)\n  }\n\n  if (!settings.url) settings.url = window.location.toString()\n  serializeData(settings)\n\n  var mime = settings.accepts[dataType],\n      baseHeaders = { },\n      protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n      xhr = ajax.settings.xhr(), abortTimeout\n\n  if (!settings.crossDomain) baseHeaders['X-Requested-With'] = 'XMLHttpRequest'\n  if (mime) {\n    baseHeaders['Accept'] = mime\n    if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\n    xhr.overrideMimeType && xhr.overrideMimeType(mime)\n  }\n  if (settings.contentType || (settings.data && settings.type.toUpperCase() != 'GET'))\n    baseHeaders['Content-Type'] = (settings.contentType || 'application/x-www-form-urlencoded')\n  settings.headers = extend(baseHeaders, settings.headers || {})\n\n  xhr.onreadystatechange = function(){\n    if (xhr.readyState == 4) {\n      clearTimeout(abortTimeout)\n      var result, error = false\n      if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\n        dataType = dataType || mimeToDataType(xhr.getResponseHeader('content-type'))\n        result = xhr.responseText\n\n        try {\n          if (dataType == 'script')    (1,eval)(result)\n          else if (dataType == 'xml')  result = xhr.responseXML\n          else if (dataType == 'json') result = blankRE.test(result) ? null : JSON.parse(result)\n        } catch (e) { error = e }\n\n        if (error) ajaxError(error, 'parsererror', xhr, settings)\n        else ajaxSuccess(result, xhr, settings)\n      } else {\n        ajaxError(null, 'error', xhr, settings)\n      }\n    }\n  }\n\n  var async = 'async' in settings ? settings.async : true\n  xhr.open(settings.type, settings.url, async)\n\n  for (name in settings.headers) xhr.setRequestHeader(name, settings.headers[name])\n\n  if (ajaxBeforeSend(xhr, settings) === false) {\n    xhr.abort()\n    return false\n  }\n\n  if (settings.timeout > 0) abortTimeout = setTimeout(function(){\n      xhr.onreadystatechange = empty\n      xhr.abort()\n      ajaxError(null, 'timeout', xhr, settings)\n    }, settings.timeout)\n\n  // avoid sending empty string (#319)\n  xhr.send(settings.data ? settings.data : null)\n  return xhr\n}\n\n\n// trigger a custom event and return false if it was cancelled\nfunction triggerAndReturn(context, eventName, data) {\n  //todo: Fire off some events\n  //var event = $.Event(eventName)\n  //$(context).trigger(event, data)\n  return true;//!event.defaultPrevented\n}\n\n// trigger an Ajax \"global\" event\nfunction triggerGlobal(settings, context, eventName, data) {\n  if (settings.global) return triggerAndReturn(context || document, eventName, data)\n}\n\n// Number of active Ajax requests\najax.active = 0\n\nfunction ajaxStart(settings) {\n  if (settings.global && ajax.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\n}\nfunction ajaxStop(settings) {\n  if (settings.global && !(--ajax.active)) triggerGlobal(settings, null, 'ajaxStop')\n}\n\n// triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\nfunction ajaxBeforeSend(xhr, settings) {\n  var context = settings.context\n  if (settings.beforeSend.call(context, xhr, settings) === false ||\n      triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\n    return false\n\n  triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\n}\nfunction ajaxSuccess(data, xhr, settings) {\n  var context = settings.context, status = 'success'\n  settings.success.call(context, data, status, xhr)\n  triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\n  ajaxComplete(status, xhr, settings)\n}\n// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\nfunction ajaxError(error, type, xhr, settings) {\n  var context = settings.context\n  settings.error.call(context, xhr, type, error)\n  triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error])\n  ajaxComplete(type, xhr, settings)\n}\n// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\nfunction ajaxComplete(status, xhr, settings) {\n  var context = settings.context\n  settings.complete.call(context, xhr, status)\n  triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\n  ajaxStop(settings)\n}\n\n// Empty function, used as default callback\nfunction empty() {}\n\najax.JSONP = function(options){\n  if (!('type' in options)) return ajax(options)\n\n  var callbackName = 'jsonp' + (++jsonpID),\n    script = document.createElement('script'),\n    abort = function(){\n      //todo: remove script\n      //$(script).remove()\n      if (callbackName in window) window[callbackName] = empty\n      ajaxComplete('abort', xhr, options)\n    },\n    xhr = { abort: abort }, abortTimeout,\n    head = document.getElementsByTagName(\"head\")[0]\n      || document.documentElement\n\n  if (options.error) script.onerror = function() {\n    xhr.abort()\n    options.error()\n  }\n\n  window[callbackName] = function(data){\n    clearTimeout(abortTimeout)\n      //todo: remove script\n      //$(script).remove()\n    delete window[callbackName]\n    ajaxSuccess(data, xhr, options)\n  }\n\n  serializeData(options)\n  script.src = options.url.replace(/=\\?/, '=' + callbackName)\n\n  // Use insertBefore instead of appendChild to circumvent an IE6 bug.\n  // This arises when a base node is used (see jQuery bugs #2709 and #4378).\n  head.insertBefore(script, head.firstChild);\n\n  if (options.timeout > 0) abortTimeout = setTimeout(function(){\n      xhr.abort()\n      ajaxComplete('timeout', xhr, options)\n    }, options.timeout)\n\n  return xhr\n}\n\najax.settings = {\n  // Default type of request\n  type: 'GET',\n  // Callback that is executed before request\n  beforeSend: empty,\n  // Callback that is executed if the request succeeds\n  success: empty,\n  // Callback that is executed the the server drops error\n  error: empty,\n  // Callback that is executed on request complete (both: error and success)\n  complete: empty,\n  // The context for the callbacks\n  context: null,\n  // Whether to trigger \"global\" Ajax events\n  global: true,\n  // Transport\n  xhr: function () {\n    return new window.XMLHttpRequest()\n  },\n  // MIME types mapping\n  accepts: {\n    script: 'text/javascript, application/javascript',\n    json:   jsonType,\n    xml:    'application/xml, text/xml',\n    html:   htmlType,\n    text:   'text/plain'\n  },\n  // Whether the request is to another domain\n  crossDomain: false,\n  // Default timeout\n  timeout: 0\n}\n\nfunction mimeToDataType(mime) {\n  return mime && ( mime == htmlType ? 'html' :\n    mime == jsonType ? 'json' :\n    scriptTypeRE.test(mime) ? 'script' :\n    xmlTypeRE.test(mime) && 'xml' ) || 'text'\n}\n\nfunction appendQuery(url, query) {\n  return (url + '&' + query).replace(/[&?]{1,2}/, '?')\n}\n\n// serialize payload and append it to the URL for GET requests\nfunction serializeData(options) {\n  if (type(options.data) === 'object') options.data = param(options.data)\n  if (options.data && (!options.type || options.type.toUpperCase() == 'GET'))\n    options.url = appendQuery(options.url, options.data)\n}\n\najax.get = function(url, success){ return ajax({ url: url, success: success }) }\n\najax.post = function(url, data, success, dataType){\n  if (type(data) === 'function') dataType = dataType || success, success = data, data = null\n  return ajax({ type: 'POST', url: url, data: data, success: success, dataType: dataType })\n}\n\najax.getJSON = function(url, success){\n  return ajax({ url: url, success: success, dataType: 'json' })\n}\n\nvar escape = encodeURIComponent\n\nfunction serialize(params, obj, traditional, scope){\n  var array = type(obj) === 'array';\n  for (var key in obj) {\n    var value = obj[key];\n\n    if (scope) key = traditional ? scope : scope + '[' + (array ? '' : key) + ']'\n    // handle data in serializeArray() format\n    if (!scope && array) params.add(value.name, value.value)\n    // recurse into nested objects\n    else if (traditional ? (type(value) === 'array') : (type(value) === 'object'))\n      serialize(params, value, traditional, key)\n    else params.add(key, value)\n  }\n}\n\nfunction param(obj, traditional){\n  var params = []\n  params.add = function(k, v){ this.push(escape(k) + '=' + escape(v)) }\n  serialize(params, obj, traditional)\n  return params.join('&').replace('%20', '+')\n}\n\nfunction extend(target) {\n  var slice = Array.prototype.slice;\n  slice.call(arguments, 1).forEach(function(source) {\n    for (key in source)\n      if (source[key] !== undefined)\n        target[key] = source[key]\n  })\n  return target\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/packing-ajax/index.js","var toString = Object.prototype.toString\r\n\r\nmodule.exports = function(val){\r\n  switch (toString.call(val)) {\r\n    case '[object Function]': return 'function'\r\n    case '[object Date]': return 'date'\r\n    case '[object RegExp]': return 'regexp'\r\n    case '[object Arguments]': return 'arguments'\r\n    case '[object Array]': return 'array'\r\n    case '[object String]': return 'string'\r\n  }\r\n\r\n  if (typeof val == 'object' && val && typeof val.length == 'number') {\r\n    try {\r\n      if (typeof val.callee == 'function') return 'arguments';\r\n    } catch (ex) {\r\n      if (ex instanceof TypeError) {\r\n        return 'arguments';\r\n      }\r\n    }\r\n  }\r\n\r\n  if (val === null) return 'null'\r\n  if (val === undefined) return 'undefined'\r\n  if (val && val.nodeType === 1) return 'element'\r\n  if (val === Object(val)) return 'object'\r\n\r\n  return typeof val\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/type-of/index.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\nimport ajax from 'packing-ajax'\r\n\r\n/**\r\n * Class AJAX\r\n *\r\n * Abstraction of all AJAX interactions\r\n */\r\nexport default class AJAX {\r\n\r\n    /**\r\n     * Class constructor\r\n     *\r\n     * @returns {null}\r\n     */\r\n    constructor() {\r\n        this.baseUrl = 'https://api.pinterest.com/';\r\n        this.apiVersion = 'v1/';\r\n    }\r\n\r\n    /**\r\n     * Build the URL of the appropriate API being called\r\n     *\r\n     * @param {string}  endpoint The API endpoint being queried\r\n     *\r\n     * @returns {string}\r\n     * @private\r\n     */\r\n    _buildUrl(endpoint) {\r\n        return this.baseUrl + this.apiVersion + endpoint;\r\n    }\r\n\r\n    /**\r\n     * Execute the API query\r\n     *\r\n     * @param {string} endpoint The API endpoint to be queried\r\n     * @param {Object} data     Any additional data required\r\n     * @param {string} type     The type of request being made. E.g. GET, POST etc\r\n     *\r\n     * @returns {Promise}\r\n     * @private\r\n     */\r\n    _fetch(endpoint, data, type) {\r\n        return new Promise((resolve, reject) => {\r\n            const url = this._buildUrl(endpoint);\r\n\r\n            ajax({\r\n                url: url,\r\n                type: type,\r\n                dataType: 'json',\r\n                data: data,\r\n                success: (response) => {\r\n                    resolve(response);\r\n                },\r\n                error: (response) => {\r\n                    reject(response);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Helper function for performing a GET request\r\n     *\r\n     * @param {string} endpoint The API endpoint to be queried\r\n     * @param {Object} data     Additional data to be sent with the request\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Get(endpoint, data) {\r\n        return new Promise((resolve, reject) => {\r\n            const ajax = new AJAX();\r\n            ajax._fetch(endpoint, data, 'GET')\r\n                .then(resolve)\r\n                .catch(reject);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Helper function for performing a POST request\r\n     *\r\n     * @param {string} endpoint The API endpoint to be queried\r\n     * @param {Object} data     Additional data to be sent with the request\r\n     *\r\n     * @returns {Promise}\r\n     */\r\n    static Post(endpoint, data) {\r\n        return new Promise((resolve, reject) => {\r\n            const ajax = new AJAX();\r\n            ajax._fetch(endpoint, data, 'POST')\r\n                .then(resolve)\r\n                .catch(reject);\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/AJAX.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\r\n * Copyright (C) 2017 Luke Denton\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation; either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\n/**\r\n * Class ErrorUtil\r\n *\r\n * Interface for abstracting the error reporting service\r\n */\r\nexport default class ErrorUtil {\r\n\r\n    /**\r\n     * Log an error to the bug tracking system\r\n     *\r\n     * @param {Error}  error   A description of the error\r\n     * @param {Object} options Extra details of the error\r\n     *\r\n     * @returns {null}\r\n     */\r\n    static Log(error, options) {\r\n        if (window.location.origin === 'https://bulkpinner.github.io') {\r\n            bugsnagClient.notify(error, options);\r\n        } else {\r\n            console.error(error);\r\n            console.error(options);\r\n        }\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/services/ErrorUtil.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CustomEvent from 'services/CustomEvent';\nimport API from 'services/API';\nimport DataStore from 'services/DataStore';\nimport PinPreview from 'PinPreview';\nimport Mousetrap from 'mousetrap';\nimport debounce from 'debounce';\nimport Analytics from 'services/Analytics';\n\n/**\n * Class Application\n */\nexport default class Application {\n\n    constructor() {\n        this.previewsPinsContainer = document.querySelector('.preview-pins-container');\n        this.imageSelectContainer = document.querySelector(\".image-select-container\");\n        this.refreshBoardsButton = document.querySelector('.refresh-boards');\n        this.pinsContainer = document.querySelector('.pins-container');\n        this.sendToPinterestButton = document.querySelector('.send-to-pinterest');\n        this.sendAllToBoardSelect = document.getElementById('send-all-to-board');\n        this.fileUploadInput = document.getElementById(\"fileToUpload\");\n        this.modalOverlay = document.querySelector('.modal-overlay');\n        this.clearButton    = document.querySelector(\".clear-completed\");\n        this.clearAllButton = document.querySelector(\".clear-all\");\n        this.pinPreviews = [];\n\n        // Wait until the user is authenticated before showing the main application interface\n        CustomEvent.on('user-authenticated', () => {\n            this.init();\n        });\n    }\n\n    /**\n     * @returns {null}\n     */\n    init() {\n        this.showApplicationContainer();\n        this.attachListeners();\n        this.createKeyboardShortcuts();\n    }\n\n    /**\n     * @returns {null}\n     */\n    showApplicationContainer() {\n        this.imageSelectContainer.classList.toggle('hidden', false);\n    }\n\n    /**\n     * @returns {null}\n     */\n    hideApplicationContainer() {\n        this.imageSelectContainer.classList.toggle('hidden', true);\n    }\n\n    /**\n     * Attach event listeners\n     *\n     * @returns {null}\n     */\n    attachListeners() {\n        this.refreshBoardsButton.addEventListener('click', () => {\n            Application.ToggleActionMenu(false);\n            this.loadBoards(true)\n            .then(boards => {\n                this.populateBoardNames(boards);\n            })\n            .catch(response => {\n                console.error(response);\n            });\n            Analytics.FeatureUsed('refresh_boards');\n        });\n\n        this.clearButton.addEventListener('click', e => {\n            this.clearCompleted();\n        });\n\n        this.clearAllButton.addEventListener('click', e => {\n            this.clearAll();\n        });\n\n        this.pinsContainer.addEventListener('blur', e => {\n            if (e.target.matches('.note')) {\n                e.target.classList.toggle('invalid', e.target.value !== '');\n            }\n        });\n\n        // Event listener that will handle closing any open action menus\n        document.querySelector('body').addEventListener('click', (e) => {\n            this.pinPreviews.forEach(pinPreview => {\n                if (pinPreview.actionMenuTrigger !== e.target) {\n                    pinPreview.hidePreviewActions();\n                }\n            });\n            Application.ToggleActionMenu(false);\n        });\n\n        this.sendToPinterestButton.addEventListener('click', () => {\n            if (this.validateInputs()) {\n                this.createPins();\n            }\n        });\n\n        this.sendAllToBoardSelect.addEventListener('change', e => {\n            const boardValue = e.target.value;\n\n            if (boardValue !== '') {\n                this.updateSelectedBoards(boardValue);\n                Analytics.FeatureUsed('update_selected_boards');\n            }\n        });\n\n        this.fileUploadInput.onchange = e => this.createPinPreviews(e);\n\n        document.querySelector('.privacy-policy-link').addEventListener('click', e => {\n            this.showPrivacyPolicy();\n        });\n\n        document.querySelector('.modal-overlay').addEventListener('click', e => {\n            if (e.target.classList.contains('modal-overlay')) {\n                this.hidePrivacyPolicy();\n                this.hideKeyboardShortcuts();\n                return;\n            }\n\n            if (e.target.classList.contains('close')) {\n                this.hidePrivacyPolicy();\n                this.hideKeyboardShortcuts();\n            }\n        });\n\n        // Prepare the preview pin template with names of boards to pin to\n        this.loadBoards().then(boards => {\n            this.populateBoardNames(boards);\n        });\n\n        // Listen for scroll event to check for updating the sticky-ness of the Pin button\n        document.addEventListener('scroll', debounce(() => {\n            this.updateStickyPin();\n        }, 10, false));\n\n        document.querySelector('.action-menu-toggle').addEventListener('click', (e) => {\n            e.stopImmediatePropagation();\n            Application.ToggleActionMenu();\n        });\n\n        // @TODO This will need to be refactored - create an action menu class that will work for both the user actions and app actions\n        document.querySelector('.user-action-menu-toggle').addEventListener('click', e => {\n            document.querySelector('.user-actions-container').classList.toggle('show-menu');\n        });\n\n        document.querySelector('.user-action__disconnect').addEventListener('click', e => {\n            DataStore.Remove(DataStore.DATA__ACCESS_TOKEN());\n            DataStore.Remove(DataStore.DATA__BOARDS());\n            Analytics.FeatureUsed('disconnect_pinterest');\n            location.reload();\n        });\n    }\n\n    /**\n     * Clear preview pins that have been uploaded to pinterest\n     *\n     * @returns {null}\n     */\n    clearCompleted() {\n        const completedPins = document.querySelectorAll(\".preview-container[data-pinned='true']\");\n        this.clear(completedPins);\n        this.pinPreviews = this.pinPreviews.filter(preview => !preview.isPinned());\n    }\n\n    /**\n     * Clear all preview pins\n     *\n     * @returns {null}\n     */\n    clearAll() {\n        const previewPins = document.querySelectorAll(\".preview-container\");\n        this.clear(previewPins);\n        this.pinPreviews = [];\n    }\n\n    /**\n     * Remove elements from the DOM\n     *\n     * @param {NodeList} elements Array of elements to remove\n     */\n    clear(elements) {\n        for (let i = 0 ; i < elements.length ; i++) {\n            elements[i].remove();\n        }\n\n        if (document.querySelectorAll(\".preview-container\").length === 0) {\n            document.querySelector('.page-header').classList.toggle('large', true);\n            document.querySelector('.get-started').classList.toggle('hidden', false);\n            document.querySelector('.application-container').classList.toggle('expanded', false);\n            document.querySelector('.label-text').innerText = 'Choose Images';\n            document.querySelector('.preview-pins-container').classList.toggle('hidden', true);\n        }\n\n        this.resetSendAllToBoard();\n        Application.ToggleActionMenu(false);\n    }\n\n    /**\n     * Reset the selected value in the Send all to board drop down\n     *\n     * @returns {null}\n     */\n    resetSendAllToBoard() {\n        document.querySelector(\"#send-all-to-board\").value = \"\";\n    }\n\n    /**\n     * Assign application keyboard shortcuts\n     *\n     * @returns {null}\n     */\n    createKeyboardShortcuts() {\n        // Choose/Add more pictures to pin\n        Mousetrap.bind('a', () => {\n            document.getElementById('fileToUpload').click();\n            Analytics.KeyboardShortcutUsed('add_more');\n        });\n\n        // Clear all completed (pinned) images\n        Mousetrap.bind('p c', () => {\n            document.querySelector('.clear-completed.action-button').click();\n            Analytics.KeyboardShortcutUsed('clear_completed');\n        });\n\n        // Clean all images\n        Mousetrap.bind('p x', () => {\n            document.querySelector('.clear-all.action-button').click();\n            Analytics.KeyboardShortcutUsed('clear_all');\n        });\n\n        // Show privacy policy\n        Mousetrap.bind('p p', () => {\n            document.querySelector('.privacy-policy-link').click();\n            Analytics.KeyboardShortcutUsed('show_privacy_policy');\n        });\n\n        // Show privacy policy\n        Mousetrap.bind('esc', () => {\n            this.hideKeyboardShortcuts();\n            this.hidePrivacyPolicy();\n        });\n\n        // Autofill shortcut\n        Mousetrap.bind('> > >', () => {\n            this.autofillFields();\n            Analytics.KeyboardShortcutUsed('autofill_fields');\n        });\n\n        // Show keyboard shortcuts modal\n        Mousetrap.bind('?', () => {\n            this.showKeyboardShortcuts();\n            Analytics.KeyboardShortcutUsed('show_keyboard_shortcuts_modal');\n        });\n    }\n\n    /**\n     * Loop through the images selected and create instances of the Pin Preview class for each\n     *\n     * @param {Event} e The event object\n     *\n     * @returns {null}\n     */\n    createPinPreviews(e) {\n        const input = e.target;\n\n        if (input.files.length === 0) {\n            return;\n        }\n\n        document.querySelector('.page-header').classList.toggle('large', false);\n        document.querySelector('.get-started').classList.toggle('hidden', true);\n        document.querySelector('.application-container').classList.toggle('expanded', true);\n        document.querySelector('.label-text').innerText = 'Add More Images';\n        this.previewsPinsContainer.classList.toggle('hidden', false);\n\n        window.setTimeout(() => { // Allow time for the CSS animation to run before\n            // Set the breakpoint for the Pin button becoming sticky _after_ the header is back to it's small state\n            const scrollOffset = -20; // Padding changes from 30px top 10px, so that needs to be factored in\n            this.windowBreakpoint = Math.abs(document.querySelector('.action-toolbar').getBoundingClientRect().top - document.querySelector('body').getBoundingClientRect().top - scrollOffset);\n\n            for (let i = 0 ; i < input.files.length ; i++) {\n                let file = input.files[i];\n                let pinPreview = new PinPreview(file);\n                this.previewsPinsContainer.querySelector(\".pins-container\").appendChild(pinPreview.render());\n\n                // Grab the pin preview element that was just created and set it on the Pin Preview class\n                // Unable to use the returned value of appendChild, as it returns and empty DocumentFragment\n                let pinPreviews = this.previewsPinsContainer.querySelectorAll('.preview-container');\n                let instance = pinPreviews[(pinPreviews.length - 1)];\n                pinPreview.setInstance(instance);\n                pinPreview.attachListeners();\n\n                this.pinPreviews.push(pinPreview);\n            }\n        }, 300);\n    }\n\n    /**\n     * Load the users boards\n     *\n     * @param {Boolean} forceLoad [Optional] Indicates if the API should be queried regardless of DataStore\n     *\n     * @returns {Promise}\n     */\n    loadBoards(forceLoad = false) {\n        return new Promise((resolve, reject) => {\n            const boards = DataStore.Get(DataStore.DATA__BOARDS());\n            if (boards !== null && !forceLoad) {\n                resolve(JSON.parse(boards));\n                return;\n            }\n\n            API.Boards()\n            .then((boards) => {\n                DataStore.Set(DataStore.DATA__BOARDS(), JSON.stringify(boards));\n                resolve(boards);\n            })\n            .catch((response) => {\n                reject(response);\n            });\n        });\n    }\n\n    /**\n     * Populate the <select> of board names with the names returned from Pinterest API\n     *\n     * @param {Array} boards An array of board objects\n     *\n     * @return {null}\n     */\n    populateBoardNames(boards) {\n        const boardNames = document.getElementById('preview-template').content.querySelector(\".board-names\");\n        boardNames.innerHTML = ''; // Remove the 'Loading...' option\n\n        if (boards.length === 0) {\n            let option = this.createBoardNameOptionElement({id: '', name: `You don't have any Pinterest boards!`});\n            boardNames.appendChild(option);\n            document.querySelector(\".send-to-pinterest\").classList.toggle('hidden', true); // Can't send to pinterest as the user doesn't have any boards\n            return;\n        }\n\n        // The user may have seen the message above, gone to Pinterest to create a board, and then come back to click the Refresh Boards button\n        document.querySelector(\".send-to-pinterest\").classList.toggle('hidden', false);\n\n        for (let i = 0 ; i < boards.length ; i++) {\n            let board = boards[i];\n            let option = this.createBoardNameOptionElement(board);\n            boardNames.appendChild(option);\n        }\n\n        // Update any <select> elements in preview-containers that have already been activated from the template\n        const existingBoardNameSelectors = document.querySelectorAll('.board-names');\n        for (let i = 0 ; i < existingBoardNameSelectors.length ; i++) {\n            let select = existingBoardNameSelectors[i];\n            select.innerHTML = '';\n\n            // If the board being looped is the 'send all to board', need to add the blank option\n            if (select.id === 'send-all-to-board') {\n                let option = this.createBoardNameOptionElement({name: '---', id: ''});\n                select.appendChild(option);\n            }\n\n            for (let i = 0 ; i < boards.length ; i++) {\n                let board = boards[i];\n                let option = this.createBoardNameOptionElement(board);\n                select.appendChild(option);\n            }\n        }\n    }\n\n    /**\n     * Create a new <option> element for the provided board object\n     *\n     * @param {Object} board Object representing a Pinterest board\n     *\n     * @returns {Element}\n     */\n    createBoardNameOptionElement(board) {\n        const option = document.createElement('option');\n        option.value = board.id;\n        option.innerText = board.name;\n        return option;\n    }\n\n    /**\n     * Update the selected board in each of the pin previews to match the one selected in the\n     * Send all images to board drop down\n     *\n     * @param {int} newBoard The ID value of the board to be selected\n     */\n    updateSelectedBoards(newBoard) {\n        // Loop through all existing board name selectors and update their values to match the one just selected\n        const boardNameSelectors = document.querySelectorAll('.preview-pin-board-select');\n        for (let i = 0 ; i < boardNameSelectors.length ; i++) {\n            let boardNameSelect = boardNameSelectors[i];\n\n            boardNameSelect.value = newBoard;\n        }\n    }\n\n    /**\n     * Loop through all pin previews and make sure a note has been set\n     *\n     * If a required field isn't filled in, it will be marked as invalid, but also set up with tabIndexing,\n     * so that users can click tab to easily move between only the notes that aren't filled in yet\n     *\n     * @returns {Boolean}\n     */\n    validateInputs() {\n        const previews = document.querySelectorAll('.preview-container');\n        let error = false;\n        let tabIndex = 1;\n\n        for (let i = 0 ; i < previews.length ; i++) {\n            let preview = previews[i];\n\n            const noteContainer = preview.querySelector(\".note-container\");\n            const note = noteContainer.querySelector(\".note\").value;\n\n            if (note === '') {\n                let note = preview.querySelector('.note');\n                note.classList.toggle('invalid', true);\n                note.tabIndex = tabIndex;\n                if (tabIndex === 1) {\n                    note.focus();\n                    noteContainer.dataset.balloon = noteContainer.dataset.tooltip;\n\n                    // @todo: This needs to be cleaned up and removed from here. Also need to make sure it only triggers once\n                    note.addEventListener('blur', e => {\n                        noteContainer.removeAttribute('data-balloon');\n                    });\n                }\n                tabIndex++;\n                error = true;\n            }\n        }\n\n        return error === false;\n    }\n\n    /**\n     * Loop through all of the <img> elements, and call the API function to create a pin,\n     * with all the relevant information\n     *\n     * @returns {null}\n     */\n    createPins() {\n        for (let pinPreview of this.pinPreviews) {\n            // Skip any images that have already been pinned in this session\n            if (pinPreview.instance.dataset.pinned) {\n                continue;\n            }\n\n            pinPreview.createPin();\n        }\n    }\n\n    /**\n     * Display the privacy policy modal\n     *\n     * @returns {null}\n     */\n    showPrivacyPolicy() {\n        this.modalOverlay.classList.remove('hidden');\n        this.modalOverlay.querySelector('.privacy-policy-modal').classList.remove('hidden');\n    }\n\n    /**\n     * Hide the privacy policy modal\n     *\n     * @returns {null}\n     */\n    hidePrivacyPolicy() {\n        this.modalOverlay.classList.add('hidden');\n        this.modalOverlay.querySelector('.privacy-policy-modal').classList.add('hidden');\n    }\n\n    /**\n     * Display the keyboard shortcuts modal\n     *\n     * @returns {null}\n     */\n    showKeyboardShortcuts() {\n        this.modalOverlay.classList.remove('hidden');\n        this.modalOverlay.querySelector('.keyboard-shortcuts-modal').classList.remove('hidden');\n    }\n\n    /**\n     * Hide the keyboard shortcuts modal\n     *\n     * @returns {null}\n     */\n    hideKeyboardShortcuts() {\n        this.modalOverlay.classList.add('hidden');\n        this.modalOverlay.querySelector('.keyboard-shortcuts-modal').classList.add('hidden');\n    }\n\n    /**\n     * Auto fill the note and link fields from the first Pin Preview element, to the rest of the Pin Preview elements\n     *\n     * @returns {null}\n     */\n    autofillFields() {\n        if (this.pinPreviews.length === 0) {\n            return;\n        }\n\n        const noteField = this.pinPreviews[0].instance.querySelector(\"#note\").value;\n        const linkField = this.pinPreviews[0].instance.querySelector(\".link\").value;\n\n        for (let pinPreview of this.pinPreviews) {\n            pinPreview.setNote(noteField);\n            pinPreview.setLink(linkField);\n        }\n    }\n\n    /**\n     * Check for and enable/disable the Pin button from being sticky\n     *\n     * @returns {null}\n     */\n    updateStickyPin() {\n        if (window.pageYOffset >= this.windowBreakpoint) {\n            document.querySelector('.action-toolbar').classList.toggle('sticky', true);\n            document.querySelector('.preview-pins-container').classList.toggle('toolbar-is-sticky', true);\n        } else {\n            document.querySelector('.action-toolbar').classList.toggle('sticky', false);\n            document.querySelector('.preview-pins-container').classList.toggle('toolbar-is-sticky', false);\n        }\n    }\n\n    /**\n     * Toggle the state of the action menu\n     *\n     * @param {boolean|undefined} show [Optional] True/false to force show/hide the menu\n     *                                 No value passed and the menu will just toggle\n     *\n     * @returns {null}\n     */\n    static ToggleActionMenu(show = undefined) {\n        const actionButtons = document.querySelector('.action-buttons');\n\n        if (typeof show !== 'undefined') {\n            actionButtons.classList.toggle('show-menu', show);\n        } else {\n            actionButtons.classList.toggle('show-menu');\n        }\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/views/Application.js","/* Bulk Pinner - Create multiple pins in your Pinterest boards at once\n * Copyright (C) 2017 Luke Denton\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CustomEvent from 'services/CustomEvent';\nimport API from 'services/API';\nimport DataStore from 'services/DataStore';\n\n/**\n * Class Authorization\n */\nexport default class Authorization {\n\n    constructor() {\n        this.authenticationContainer = document.querySelector(\".authentication-container\");\n        this.authenticationButton    = document.querySelector(\".authenticate-button\");\n\n        // Listen for the instruction that the user isn't authenticated yet\n        CustomEvent.on('user-not-authenticated', () => {\n            this.init();\n        });\n    }\n\n    /**\n     * Initialise the authorization section of the application\n     *\n     * @returns {null}\n     */\n    init() {\n        this.showAuthenticationContainer();\n        this.attachListeners();\n    }\n\n    /**\n     * @returns {null}\n     */\n    showAuthenticationContainer() {\n        this.authenticationContainer.classList.toggle('hidden', false);\n        CustomEvent.trigger('authentication-shown');\n    }\n\n    /**\n     * @returns {null}\n     */\n    hideAuthenticationContainer() {\n        this.authenticationContainer.classList.toggle('hidden', true);\n        CustomEvent.trigger('authentication-hidden');\n    }\n\n    /**\n     * Attach event listeners\n     *\n     * @returns {null}\n     */\n    attachListeners() {\n        this.authenticationButton.addEventListener('click', () => {\n            API.Login()\n            .then(({accessToken}) => {\n                DataStore.Set(DataStore.DATA__ACCESS_TOKEN(), accessToken);\n                CustomEvent.trigger('user-authenticated');\n            })\n            .catch((response) => {\n                console.error(response);\n            });\n        });\n\n        // Make sure the authentication container is hidden if the application container gets shown\n        CustomEvent.on('user-authenticated', e => {\n            this.hideAuthenticationContainer();\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/views/Authorization.js"],"sourceRoot":""}